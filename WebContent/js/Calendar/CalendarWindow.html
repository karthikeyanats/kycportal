<html>
<xml id="leave_list_xml" src="Leave_List.xml"></xml>

<head>
<title>C a l e n d a r </title>
<link rel="stylesheet" href="Calendar.css">
</head>

<body bgcolor="#cfcfcf" topmargin="0" leftmargin="0" onLoad="Load_Fun()" text='navy' style="font-size: 8pt;">
<form name="Calendar_Parent_Form" method="POST">
<table  border='1' width="100%" height=200 bordercolor='#9ea0a2' cellpadding=0 cellspacing=0>
<tr>
<td>

		<table align="center" border='0' height="20" width='114'>
		<tr>
		<td>
		 <select class="tabledivison" size='1' name='D1' onChange='Choose_Fun(this.selectedIndex)' style="font-size: 7pt; color=navy;">
		 <option>September</option>
		 </select>
		 <td>
		 <img src='./images/cal_back.gif' onClick="Decrement_Function()">
		 <td><input class="tabledivison" type="text" name="Year_Field" size="3" onKeyUp='Key_Function()' maxlength="4" style="font-size: 8pt; font-weight: bold; color=navy">
		 <td><img src='./images/cal_forw.gif' onClick="Increment_Function()">
		 </table>
		 </td>
		 </tr>
		 <tr>
		 <td align='center'>
        <table border='0' bgcolor='#0b5390' bordercolor=red width='100%' height='20' cellspacing='5' style="font-size: 8pt; font-weight: bold">
	        <tr  align='center' style="font-size: 8pt; color: white;">

	          <td width='20' height='20'  style="color: white" ><center><font size="1"><b>Su</b></font></center></td>
	          <td width='20' height='20'  style="color: white" ><center><font size="1"><b>Mo</b></font></center></td>
	          <td width='20' height='20'  style="color: white" ><center><font size="1"><b>Tu</b></font></center></td>
	          <td width='20' height='20'  style="color: white" ><center><font size="1"><b>We</b></font></center></td>
	          <td width='20' height='20' style="color: white" ><center><font size="1"><b>Th</b></font></center></td>
	          <td width='20' height='20'  style="color: white" ><center><font size="1"><b>Fr</b></font></center></td>
	          <td width='20' height='20'  style="color: white" ><center><font size="1"><b>Sa</b></font></center></td>
	        </tr>
	      </table>
	      </td>
	      </tr>
	      <tr>
	      <td>


	        <table align="center" id="calendarTable" border='1' bordercolor=white width='100%' height='95' cellspacing='1' style="font-size: 8pt; font-weight: bold">
		        <tbody>
		        <tr align='center' style="font-size: 8pt; color:#000084">
		          <td width='20' height='20' class="sundaystyle" onClick=getValue(0,0) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(0,1) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(0,2) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(0,3) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(0,4) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(0,5) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(0,6) onDblClick=OK_Function()></td>
		        </tr>
		        <tr align='center' style="font-size: 8pt; color:#000084">
		          <td width='20' height='20' class="sundaystyle" onClick=getValue(1,0) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(1,1) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(1,2) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(1,3) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(1,4) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(1,5) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(1,6) onDblClick=OK_Function()></td>
		        </tr>
		        <tr align='center' style="font-size: 8pt; color:#000084">
		          <td width='20' height='20' class="sundaystyle" onClick=getValue(2,0) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(2,1) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(2,2) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(2,3) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(2,4) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(2,5) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(2,6) onDblClick=OK_Function()></td>
		        </tr>
		        <tr align='center' style="font-size: 8pt; color:#000084">
		          <td width='20' height='20' class="sundaystyle" onClick=getValue(3,0) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(3,1) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(3,2) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(3,3) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(3,4) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(3,5) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(3,6) onDblClick=OK_Function()></td>
		        </tr>
		        <tr align='center' style="font-size: 8pt; color:#000084">
		          <td width='20' height='20' class="sundaystyle" onClick=getValue(4,0) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(4,1) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(4,2) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(4,3) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(4,4) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(4,5) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(4,6) onDblClick=OK_Function()></td>
		        </tr>
		          <tr align='center' style="font-size: 8pt; color:#000084">
		          <td width='20' height='20' class="sundaystyle" onClick=getValue(5,0) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(5,1) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(5,2) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(5,3) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(5,4) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(5,5) onDblClick=OK_Function()></td>
		          <td width='20' height='20' class="ordinarystyle" onClick=getValue(5,6) onDblClick=OK_Function()></td>
		        </tr>
				<tr>
					<td colSpan="7" align="center">
						<img src="./images/okbutton.gif" onClick="OK_Function()"><input class="tabledivison" type="text" name="Date" onKeyDown='this.blur()' size="8"><img src="./images/todaybutton.gif" onClick="Today_Function()">
					</td>
				</tr>
        	</tbody>
        	</table>
        	</td>
        	</tr>
        	</table>
        <div style="position:absolute;top:163;left:20">
        <table align="center" border='0'>
        </table>
        </div>

 	  <input type="hidden" name="ParentField" value="date">
      <input type=hidden name=Mode value=0>
      <input type=hidden name="Leave_Mode" value=0>
      <input type=hidden name=Validate_Date>
      <input type=hidden name=server_date>
</form>
    <script language="JavaScript">
    var Date_Var;
    var Month;
    var Year;
    var Day;
    var totaldays;
    var monthstr;
    var today_date_string = "";

    function blurWin()
	{
	  self.focus();
    }

   function Load_Fun()
   {
   
    Date_Var = new Date();
    Month=Date_Var.getMonth();
    Year=Date_Var.getFullYear();
    today_date = Date_Var.getDate();
    today_date_string = new String(today_date);

    if(today_date_string.length == 1)
		today_date_string = "0"+today_date_string;

    this.today_date_string = today_date_string;

    Load_Combo_Month(Month);
    document.Calendar_Parent_Form.Year_Field.value=Year;
    TotalDays_Fun(Month,Year);
    Calendar_Parent_Fun(Year,Month);
    window.opener.Assign_Fun();
   }

   function Load_Combo_Month(Month)
        {
			this.Month = Month;
            document.Calendar_Parent_Form.D1.options[0]=new Option('January');
            document.Calendar_Parent_Form.D1.options[1]=new Option('February');
            document.Calendar_Parent_Form.D1.options[2]=new Option('March');
            document.Calendar_Parent_Form.D1.options[3]=new Option('April');
            document.Calendar_Parent_Form.D1.options[4]=new Option('May');
            document.Calendar_Parent_Form.D1.options[5]=new Option('June');
            document.Calendar_Parent_Form.D1.options[6]=new Option('July');
            document.Calendar_Parent_Form.D1.options[7]=new Option('August');
            document.Calendar_Parent_Form.D1.options[8]=new Option('September');
            document.Calendar_Parent_Form.D1.options[9]=new Option('October');
            document.Calendar_Parent_Form.D1.options[10]=new Option('November');
            document.Calendar_Parent_Form.D1.options[11]=new Option('December');
            document.Calendar_Parent_Form.D1.options[Month].selected='true';


        }


 function UnLoad_Fun()
 {
        window.opener.Calendar_ON=1;
 }

   function Choose_Fun(Month)
   {
	this.Month = Month
	this.Year = Year

    TotalDays_Fun(Month,Year);
    Calendar_Parent_Fun(Year,Month);
    }



   function Calendar_Parent_Fun(Year,Month)
         {

         this.Year = Year;
         this.Month = Month;


            var d =new Date();
            d.setFullYear(Year);
            d.setMonth(Month);
            d.setDate(1);
            Day=d.getDay();


/*


            for(var i=0; i<=41; i++)
            {

              s_day[i].innerHTML=' ';
			  s_day[i].className = "ordinarystyle";
            }



		    s_day[0].className = "sundaystyle";
		    s_day[7].className = "sundaystyle";
		    s_day[14].className  = "sundaystyle";
		    s_day[21].className  = "sundaystyle";
		    s_day[28].className  = "sundaystyle";

            for(var i=1; i<=totaldays; i++)
            {

              if((i>=1) && (i<=9))date_str='0'+i.toString();
              else date_str=i;
              if(navigator.appName == "Netscape")
              {
                document.anchors[Day].text=date_str;
              }
              else
              {
              		var leave_status = false;
              		var month_node = leave_list_xml.selectSingleNode("//LeaveDetails[leaveyear!value()='"+Year+"'$and$leavemonth!value()='"+parseInt(Month + 1)+"']");

              		if(month_node != null)
              		{
              			var leave_days = month_node.selectSingleNode("leavedays").text.split(",");

              			for(var z=0;z<leave_days.length;z++)
              			{
              				if(date_str == leave_days[z])
              					leave_status = true;
              			}
              		}

					if(date_str == today_date_string)
					{
						s_day[Day].className = "todaystyle";
					}

              		if(leave_status)
              		{
              			s_day[Day].innerHTML = date_str;
						if(date_str == today_date_string)
						{
								if(Day == 0 || Day == 7 || Day == 14 || Day == 21 || Day == 28)
								{
									s_day[Day].innerHTML=date_str;
									s_day[Day].className = "todaysundaystyle";
								}
								else
									s_day[Day].className = "todayleavestyle";
						}
						else
						{

							if(Day == 0 || Day == 7 || Day == 14 || Day == 21 || Day == 28)
							{
								s_day[Day].innerHTML=date_str;
								s_day[Day].className = "todaysundaystyle";
							}
							else
								s_day[Day].className = "leavestyle";

						}
              		}
              		else
              		{
              			if(Day == 0 || Day == 7 || Day == 14 || Day == 21 || Day == 28)
              			{
              				if(date_str == today_date_string)
							{
              					s_day[Day].innerHTML=date_str;
              					s_day[Day].className = "todaysundaystyle";
              				}
              				else
              				{
              					s_day[Day].innerHTML=date_str;
              					s_day[Day].className = "sundaystyle";
              				}
              			}
              			else
              				s_day[Day].innerHTML=date_str;
              		}
              }
              Day++;
            }
*/


			var rowInc 	= 0;
			var cellInc = 0;

			for(var rowInc=0;rowInc<6;rowInc++){
				for(var cellInc=0;cellInc<calendarTable.rows[rowInc].cells.length;cellInc++){
					calendarTable.rows[rowInc].cells[cellInc].innerHTML = "";
				}
			}

			rowInc = 0;
			cellInc= 0;

			for(var i=1; i<=totaldays; i++)
			{
				if((i>=1) && (i<=9))
					date_str=i.toString();
				else
					date_str=i;

				if(Day > 6){
					if((Day % 7) == 0){
						cellInc = 0;
						rowInc++;
					}
				}
				else{
					cellInc = Day;
				}

				if(calendarTable.rows[rowInc].cells[cellInc] != null)
					calendarTable.rows[rowInc].cells[cellInc].innerHTML = date_str;

				//s_day[Day].innerHTML=date_str;
				Day++;
				cellInc++;
			}

       }



  function Check_Leap(Year)
  {
       if(Year%4==0) return 29;
       else return 28;

  }

  function TotalDays_Fun(Month,Year)
    {



      switch(Month)
      {

        case 0:
                 monthstr="January";
                 totaldays=31;
                 break;
        case 1:
                 monthstr="February";
                 totaldays=Check_Leap(Year);
                 break;
        case 2:
                 monthstr="March";
                 totaldays=31;
                 break;
        case 3:
                 monthstr="April";
                 totaldays=30;
                 break;
        case 4:
                 monthstr="May";
                 totaldays=31;
                 break;
        case 5:
                 monthstr="June";
                 totaldays=30;
                 break;
        case 6:
                 monthstr="July";
                 totaldays=31;
                 break;
        case 7:
                 monthstr="August";
                 totaldays=31;
                 break;
        case 8:
                 monthstr="September";
                 totaldays=30;
                 break;
        case 9:
                 monthstr="October";
                 totaldays=31;
                 break;
        case 10:
                 monthstr="November";
                 totaldays=30;
                 break;
        case 11:
                 monthstr="December";
                 totaldays=31;
                 break;

       default :  "Your information wrong"
      }


}



function getValue(rowValue,cellValue)
{
	date_value = calendarTable.rows[rowValue].cells[cellValue].innerHTML;
	//date_value=eval(value+"["+id+"].innerHTML");

	if(date_value==" "){return;}
    document.Calendar_Parent_Form.Date.value=date_value+'-'+monthstr.substring(0,3)+'-'+Year;
}




function Today_Function()
{
   d = new Date();
   s=d.getDate()+"-"+d.getMonth()+"-"+d.getFullYear();
	if(document.Calendar_Parent_Form.Leave_Mode.value == "1")
	{
		var leave_status = false;
		var month_node = leave_list_xml.selectSingleNode("//LeaveDetails[leaveyear!value()='"+d.getYear()+"'$and$leavemonth!value()='"+d.getMonth()+"']");

		if(month_node != null)
		{
			var leave_days = month_node.selectSingleNode("leavedays").text.split(",");

			for(var z=0;z<leave_days.length;z++)
			{
				var string_date = new String(d.getDate());

				if(string_date.length == 1)
					string_date = "0"+string_date;

				if(string_date == leave_days[z])
					leave_status = true;
			}
		}

   		if(leave_status)
   		{
			 if(document.Calendar_Parent_Form.Leave_Mode.value == "1")
				alert("You can't fix leave date");

  			 return;
   		}
   		else
   		{
   			TotalDays_Fun(d.getMonth(),d.getYear());
   			document.Calendar_Parent_Form.Date.value=d.getDate()+"-"+monthstr.substring(0,3)+"-"+d.getFullYear();

		var Child_Field=document.Calendar_Parent_Form.ParentField.value;

		if(document.Calendar_Parent_Form.Validate_Date.value != "")
		{
			if(validateDatePassed(document.Calendar_Parent_Form.Validate_Date.value))
			{
				var Form_Field_Name=document.Calendar_Parent_Form.ParentField.value;
				var mode=document.Calendar_Parent_Form.Mode.value;
				if(mode==0)
				{
				  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				  self.close();
				}
				else if(mode==1000)
		  		{
		  		  if(calcagefun(document.Calendar_Parent_Form.Date.value)==true)
		  		  {  
		  		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
		   		  self.close();
		   		  }
		   		}
				else  
				{
				  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				}
			}
		}
		else
		{
				var Form_Field_Name=document.Calendar_Parent_Form.ParentField.value;
				var mode=document.Calendar_Parent_Form.Mode.value;

				if(mode==0)
				{
 				  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				  self.close();
				}
				else if(mode==1000)
		  		{
		  		  if(calcagefun(document.Calendar_Parent_Form.Date.value)==true)
		  		  {  
		  		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
		   		  self.close();
		   		  }
		   		}
				else
				{
				  //eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				}

		}
		}
	}
	else
	{
   			TotalDays_Fun(d.getMonth(),d.getYear());
   			document.Calendar_Parent_Form.Date.value=d.getDate()+"-"+monthstr.substring(0,3)+"-"+d.getFullYear();

		var Child_Field=document.Calendar_Parent_Form.ParentField.value;

		if(document.Calendar_Parent_Form.Validate_Date.value != "")
		{
			if(validateDatePassed(document.Calendar_Parent_Form.Validate_Date.value))
			{
				var Form_Field_Name=document.Calendar_Parent_Form.ParentField.value;
				var mode=document.Calendar_Parent_Form.Mode.value;
				if(mode==0)
				{
 				 eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				  self.close();
				}
				else if(mode==1001)
		  		{
					eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
					calcagefunstudent(document.Calendar_Parent_Form.Date.value);
					self.close();
		  		}
				else if(mode==1000)
		  		{
		  		  if(calcagefun(document.Calendar_Parent_Form.Date.value)==true)
		  		  {  
		  		  //eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
		   		  //self.close();
		   		  }
		   		}
				else
				{
				  //eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				}
			}
		}
		else
		{
				var Form_Field_Name=document.Calendar_Parent_Form.ParentField.value;
				var mode=document.Calendar_Parent_Form.Mode.value;

				if(mode==0)
				{
 				  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				  self.close();
				}
				else if(mode==1000)
			  		{
			  		  if(calcagefun(document.Calendar_Parent_Form.Date.value)==true)
			  		  {  
			  		  //eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
			   		  //self.close();
			   		  }
			   		}
				else if(mode==1001)
		  		{
					eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
					calcagefunstudent(document.Calendar_Parent_Form.Date.value);
					self.close();
		  		}
				else
				{
				  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
				}

		}
	}

}
var is_ie 		= (/msie/i.test(navigator.userAgent));
function calcAge(args)
{
	var ages = 0;
		var birthDate = new Date(args);
		var currentDate = new Date();
		var birthYear = "0";
		if(2000<=birthDate.getYear())
		{
		   birthYear = birthDate.getYear();
		}
		else
		if(is_ie)
		{
		   birthYear = birthDate.getYear()+1900;
	   }
	   else
	   {
		   birthYear = birthDate.getYear();
	   }

		var currentYear = currentDate.getYear();
		ages = currentYear -  birthYear;
		var birthMonth = birthDate.getMonth()+1;
		var currentMonth = currentDate.getMonth()+1;
		if(currentMonth<birthMonth)
			ages = ages - 1;

	return ages;
}

function calcagefunstudent()
{
	/* Createdby Maruthu Used in Student Profile Update	 */
	var dob=window.opener.document.applicationform.dateofbirth.value.split("-");
	mon="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec";
	mon=mon.split(",");
	for(var i=0;i<mon.length;i++)
	{
		if(dob[1]==mon[i])
		{
			var age=calcAge(i+1+"/"+dob[0]+"/"+dob[2]);
			window.opener.document.applicationform.age.value=age;
			//window.opener.document.getElementById("displayage").innerHTML=age;
		}
	}
}

function calcagefun(date)
{
//var dob=document.f1.user_bday.value.split("-");
var dob=date.split("-");
mon="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec";
mon=mon.split(",");
var obj=true;
	for(var i=0;i<mon.length;i++)
	{
		if(dob[1]==mon[i])
			{
				var age=calcAge(i+1+"/"+dob[0]+"/"+dob[2]);
				if(age<15)   
					{
						alert("Age Must Be Greater than 15 Years");
						obj=false;
						return false;    
					}
				if(obj==true)
					{
					/* Modifiled by Maruthu Used in Staff Registration*/
						window.opener.document.f1.user_age.value=age;
						window.opener.document.getElementById("displayage").innerHTML=age +"Years";
					}	
		   }
	}
	return obj;
		
	
}
function OK_Function()
{
  if(document.Calendar_Parent_Form.Validate_Date.value != "")
  {
   	if(validateDatePassed(document.Calendar_Parent_Form.Validate_Date.value))
  	{
  		var Form_Field_Name=document.Calendar_Parent_Form.ParentField.value;
  		var mode=document.Calendar_Parent_Form.Mode.value;
		if(mode==0)
  		{
   		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
     	  self.close();
  		}
		/* Createdby Maruthu Used in Student Profile Update	 */

		else if(mode==1001)
  		{
			eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
			calcagefunstudent(document.Calendar_Parent_Form.Date.value);
			self.close();
  		}
  		else if(mode==1000)
  		{
  		  if(calcagefun(document.Calendar_Parent_Form.Date.value)==true)
  		  {  
  		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
   		  self.close();
   		  }
   		}
  		else
  		{
  		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
		}
  	}
  }
  else
  {
  		var Form_Field_Name=document.Calendar_Parent_Form.ParentField.value;
  		var mode=document.Calendar_Parent_Form.Mode.value;

  		if(mode==0)
  		{
  		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
   		  self.close();
  		}
  		else if(mode==1001)
  		{
			eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
			calcagefunstudent(document.Calendar_Parent_Form.Date.value);
			self.close();
  		}
  		else if(mode==1000)
  		{
  		  if(calcagefun(document.Calendar_Parent_Form.Date.value)==true)
  		  {  
  		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
   		  self.close();
   		  }
   		}
  		else
  		{
  		  eval("window.opener.document."+Form_Field_Name+".value=document.Calendar_Parent_Form.Date.value");
		}
  }
  
}



function validateDatePassed(check_for)
{


   if(check_for == "Not_Less_Than_CurrentDate")
   {
      split_date_selected 			= document.Calendar_Parent_Form.Date.value.split("-");
      split_server_current_date 	= document.Calendar_Parent_Form.server_date.value.split("-");
	  selected_month_no 			= getEquivalentMonthNumber(split_date_selected[1]);
      server_month_no 				= getEquivalentMonthNumber(split_server_current_date[1]);

      if(split_date_selected[0].length == 1)
         split_date_selected[0] = "0"+split_date_selected[0];

      if(split_server_current_date[0].length == 1)
          split_server_current_date[0] = "0"+split_server_current_date[0];

      total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
      total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];


	  if(parseInt(total_server_concate) > parseInt(total_selected_concate))
      {
      	alert("Start Date should not be less than Today date");
      	return false;
      }
   }
   if(check_for == "Due_Date_Not_Less_Than_CurrentDate")
   {
      split_date_selected 			= document.Calendar_Parent_Form.Date.value.split("-");
      split_server_current_date 	= document.Calendar_Parent_Form.server_date.value.split("-");
	  selected_month_no 			= getEquivalentMonthNumber(split_date_selected[1]);
      server_month_no 				= getEquivalentMonthNumber(split_server_current_date[1]);

      if(split_date_selected[0].length == 1)
         split_date_selected[0] = "0"+split_date_selected[0];

      if(split_server_current_date[0].length == 1)
          split_server_current_date[0] = "0"+split_server_current_date[0];

      total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
      total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];


	  if(parseInt(total_server_concate) > parseInt(total_selected_concate))
      {
      	alert("Due Date should not less than Today Date");
      	return false;
      }
   }
   if(check_for == "CurrentdateandStartdate")
   {
		split_date_selected 			= document.Calendar_Parent_Form.Date.value.split("-");
		var temp						= document.Calendar_Parent_Form.server_date.value.split("@@@");
		if(temp[1] == "8")
		{
			alert("Please select start date.");
			return false;
		}
		split_server_current_date 		= temp[0].split("-");
		selected_month_no 				= getEquivalentMonthNumber(split_date_selected[1]);
      	server_month_no 				= getEquivalentMonthNumber(split_server_current_date[1]);

		if(split_date_selected[0].length == 1)
			split_date_selected[0] = "0"+split_date_selected[0];

	  	if(split_server_current_date[0].length == 1)
		  	split_server_current_date[0] = "0"+split_server_current_date[0];

		total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
        total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];

	    if(parseInt(total_server_concate) < parseInt(total_selected_concate))
	    {
		  alert("Todate should not be greater than Today date");
		  return false;
      	}

      	split_server_current_date 		= temp[1].split("-");
      	if(split_server_current_date[0].length == 1)
		  	split_server_current_date[0] = "0"+split_server_current_date[0];

		server_month_no 				= getEquivalentMonthNumber(split_server_current_date[1]);

		total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];

		if(parseInt(total_server_concate) > parseInt(total_selected_concate))
		{
			  alert("Todate should not be less than Start date");
			  return false;
      	}

   }
   if(check_for == "Not_Less_Than_CreationDate")
   {
      	   split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
           split_server_current_date = document.Calendar_Parent_Form.server_date.value.split("-");

      	   selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);
           server_month_no = getEquivalentMonthNumber(split_server_current_date[1]);

           if(split_date_selected[0].length == 1)
               split_date_selected[0] = "0"+split_date_selected[0];

           if(split_server_current_date[0].length == 1)
                split_server_current_date[0] = "0"+split_server_current_date[0];

           total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
           total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];

            if(parseInt(total_server_concate) > parseInt(total_selected_concate))
            {
            	alert("Start Date should not be less than Creation Date");
            	return false;
            }
   }
   else if(check_for == "Not_Less_Than_StartDate")
   {
      split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
      split_passed_date = document.Calendar_Parent_Form.server_date.value.split("-");

      selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);

      passed_month_no = getEquivalentMonthNumber(split_passed_date[1]);

      if(split_date_selected[0].length == 1)
         split_date_selected[0] = "0"+split_date_selected[0];

      if(split_passed_date[0].length == 1)
          split_passed_date[0] = "0"+split_passed_date[0];

      total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
      total_passed_concate = split_passed_date[2]+""+passed_month_no+""+split_passed_date[0];

      if(parseInt(total_passed_concate) > parseInt(total_selected_concate))
      {
      	alert("End Date should not be less than startdate")
      	return false;
      }
   }
   else if(check_for == "Not_Less_Than_PromotionDate")
      {
         split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
         split_passed_date = document.Calendar_Parent_Form.server_date.value.split("-");

         selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);

         passed_month_no = getEquivalentMonthNumber(split_passed_date[1]);

         if(split_date_selected[0].length == 1)
            split_date_selected[0] = "0"+split_date_selected[0];

         if(split_passed_date[0].length == 1)
             split_passed_date[0] = "0"+split_passed_date[0];

         total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
         total_passed_concate = split_passed_date[2]+""+passed_month_no+""+split_passed_date[0];

         if(parseInt(total_passed_concate) > parseInt(total_selected_concate))
         {
         	alert("End Date should not be less than PromotionDate")
         	return false;
         }
   }
   else if(check_for == "Not_Greater_Than_CurrentDate")
   {
      split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
      split_server_current_date = document.Calendar_Parent_Form.server_date.value.split("-");

	  selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);
      server_month_no = getEquivalentMonthNumber(split_server_current_date[1]);

      if(split_date_selected[0].length == 1)
         split_date_selected[0] = "0"+split_date_selected[0];

      if(split_server_current_date[0].length == 1)
          split_server_current_date[0] = "0"+split_server_current_date[0];

      total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
      total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];

      if(parseInt(total_server_concate) < parseInt(total_selected_concate))
      {
        alert("Start Date should be less than Current Date")
      	return false;
      }
   }
  else if(check_for == "Not_Greater_Than_CurrentDates")
   {
      split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
      split_server_current_date = document.Calendar_Parent_Form.server_date.value.split("-");

	  selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);
      server_month_no = getEquivalentMonthNumber(split_server_current_date[1]);

      if(split_date_selected[0].length == 1)
         split_date_selected[0] = "0"+split_date_selected[0];

      if(split_server_current_date[0].length == 1)
          split_server_current_date[0] = "0"+split_server_current_date[0];

      total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
      total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];

      if(parseInt(total_server_concate) < parseInt(total_selected_concate))
      {
      	alert("Entering Date should be less than Current Date")
      	return false;
      }
   }
   else if(check_for == "Not_Greater_Than_CurrentDate_Bday")
   {
         split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
         split_server_current_date = document.Calendar_Parent_Form.server_date.value.split("-");

   	  	 selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);
         server_month_no = getEquivalentMonthNumber(split_server_current_date[1]);

         if(split_date_selected[0].length == 1)
            split_date_selected[0] = "0"+split_date_selected[0];

         if(split_server_current_date[0].length == 1)
             split_server_current_date[0] = "0"+split_server_current_date[0];

         total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
         total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];

         if(parseInt(total_server_concate) < parseInt(total_selected_concate))
         {
         	alert("Invalid Birthday date!")
         	return false;
         }
   }
   else if(check_for == "Not_Less_Than_Todaydate")
      {

         split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
         split_passed_date = document.Calendar_Parent_Form.server_date.value.split("-");



         selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);

         passed_month_no = getEquivalentMonthNumber(split_passed_date[1]);

         if(split_date_selected[0].length == 1)
            split_date_selected[0] = "0"+split_date_selected[0];

         if(split_passed_date[0].length == 1)
             split_passed_date[0] = "0"+split_passed_date[0];

         total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
         total_passed_concate = split_passed_date[2]+""+passed_month_no+""+split_passed_date[0];



         if(parseInt(total_passed_concate) > parseInt(total_selected_concate))
         {
         	//alert("End Date should not be less than or equal to startdate")
         	alert("Last date should not be less than today date.")
         	return false;
         }
   }
   else if(check_for == "Not_Less_Than_Previous")
   {


            split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
            split_passed_date = document.Calendar_Parent_Form.server_date.value.split("-");

            selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);

            passed_month_no = getEquivalentMonthNumber(split_passed_date[1]);

            if(split_date_selected[0].length == 1)
               split_date_selected[0] = "0"+split_date_selected[0];

            if(split_passed_date[0].length == 1)
                split_passed_date[0] = "0"+split_passed_date[0];

            total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
            total_passed_concate = split_passed_date[2]+""+passed_month_no+""+split_passed_date[0];
			

			if(parseInt(total_passed_concate) >= parseInt(total_selected_concate))
            {
            	//alert("End Date should not be less than or equal to startdate")
            	alert("Should not less than previous module scheduled date.");
            	return false;
            }
   }
   else if(check_for == "Not_Less_Than_PreviousDate")
   {
            split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
            split_passed_date = document.Calendar_Parent_Form.server_date.value.split("-");

            selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);

            passed_month_no = getEquivalentMonthNumber(split_passed_date[1]);

            if(split_date_selected[0].length == 1)
               split_date_selected[0] = "0"+split_date_selected[0];

            if(split_passed_date[0].length == 1)
                split_passed_date[0] = "0"+split_passed_date[0];

            total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
            total_passed_concate = split_passed_date[2]+""+passed_month_no+""+split_passed_date[0];

			if(parseInt(total_passed_concate) >= parseInt(total_selected_concate))
            {
            	alert("Should not less than previous previous scheduled date.");
            	return false;
            }
   }
   else if(check_for == "Not_Less_Than_TodayDDdate")
   {
		split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
		split_server_current_date = document.Calendar_Parent_Form.server_date.value.split("-");

		selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);
		server_month_no = getEquivalentMonthNumber(split_server_current_date[1]);

		if(split_date_selected[0].length == 1)
			split_date_selected[0] = "0"+split_date_selected[0];

		if(split_server_current_date[0].length == 1)
			split_server_current_date[0] = "0"+split_server_current_date[0];

		total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
		total_server_concate = split_server_current_date[2]+""+server_month_no+""+split_server_current_date[0];

		if(parseInt(total_server_concate,10) < parseInt(total_selected_concate,10))
		{
			alert("DD date should be less than or equal to Current Date")
			return false;
		}
   }
   else if(check_for == "Appointment")
      {
   		split_date_selected = document.Calendar_Parent_Form.Date.value.split("-");
   		split_server_current_date = document.Calendar_Parent_Form.server_date.value.split("/");
		selected_month_no = getEquivalentMonthNumber(split_date_selected[1]);

   		if(split_date_selected[0].length == 1)
   			split_date_selected[0] = "0"+split_date_selected[0];

   		if(split_server_current_date[0].length == 1)
   			split_server_current_date[0] = "0"+split_server_current_date[0];

   		if(split_server_current_date[1].length == 1)
   			split_server_current_date[1] = "0"+split_server_current_date[1];


   		total_selected_concate = split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
   		total_server_concate = split_server_current_date[0]+""+split_server_current_date[1]+""+split_server_current_date[2];


   		if(parseInt(total_server_concate) > parseInt(total_selected_concate))
   		{
   			alert("Appointment date should not be less than Current Date")
   			return false;
   		}
   		else
   		{

   			window.opener.document.f1.action="/V-Learn/jsp/Admin/Appointment.jsp?req_value="+split_date_selected[0]+"/"+selected_month_no+"/"+split_date_selected[2];
   			window.opener.document.f1.submit();
			self.close();
   		}
   }else if(check_for == "AttendanceDate")
   {
     	splitdates					= document.Calendar_Parent_Form.server_date.value.split(",");
		split_date_selected 		= document.Calendar_Parent_Form.Date.value.split("-");
		split_server_start_date 	= splitdates[0].split("-");
		split_server_end_date		= splitdates[1].split("-");
		split_server_today_date		= splitdates[2].split("-");
		
		selected_month_no 			= getEquivalentMonthNumber(split_date_selected[1]);
		server_start_month_no 		= getEquivalentMonthNumber(split_server_start_date[1]);
		server_end_month_no 		= getEquivalentMonthNumber(split_server_end_date[1]);
		server_today_month_no 		= getEquivalentMonthNumber(split_server_today_date[1]);
		
		if(split_date_selected[0].length == 1)
			split_date_selected[0] = "0"+split_date_selected[0];

		if(split_server_start_date[0].length == 1)
			split_server_start_date[0] = "0"+split_server_start_date[0];

		if(split_server_end_date[0].length == 1)
			split_server_end_date[0] = "0"+split_server_end_date[0];

		if(split_server_today_date[0].length == 1)
			split_server_today_date[0] = "0"+split_server_today_date[0];
						
		total_selected_concate 		= split_date_selected[2]+""+selected_month_no+""+split_date_selected[0];
		total_start_concate 		= split_server_start_date[2]+""+server_start_month_no+""+split_server_start_date[0];
		total_end_concate 			= split_server_end_date[2]+""+server_end_month_no+""+split_server_end_date[0];
		total_today_concate			= split_server_today_date[2]+""+server_today_month_no+""+split_server_today_date[0];
		
		
//alert(total_selected_concate+"--"+total_today_concate);


		if(!(parseInt(total_start_concate) <= parseInt(total_selected_concate) && parseInt(total_end_concate) >= parseInt(total_selected_concate)))
		{
			alert("Attendance Date must be between Standard Start Date["+splitdates[0]+"] and End Date["+splitdates[1]+"].")
			return false;
		}
		else if(parseInt(total_today_concate) < parseInt(total_selected_concate))
	      {
	        alert("Attendance Date should not be greater than Current Date")
	      	return false;
	      }
   }
   else
   {
      return true;
   }
   return true;
}



 function Increment_Function()
  {
   var string_year = new String(Year);

   if(string_year.charAt(0) == "0")
   {
   		if(string_year.charAt(1) == "0")
   		{
   			if(string_year.charAt(2) == "0")
   			{
   				Year = string_year.substring(3);
   			}
   			else
   			{
   				Year = string_year.substring(2);
   			}
   		}
   		else
   		{
   			Year = string_year.substring(1);
   		}
   }

   if(Year != "9999")
   	   Year = parseInt(Year) + 1;

   var year_as_string = new String(Year);


   if(Year==9999)Year=9999;

   if(year_as_string.length == 1)
      Year = "000"+Year;
   else if(year_as_string.length == 2)
      Year = "00"+Year;
   else if(year_as_string.length == 3)
      Year = "0"+Year;

   document.Calendar_Parent_Form.Year_Field.value=Year;
   Month=document.Calendar_Parent_Form.D1.options.selectedIndex;
   TotalDays_Fun(Month,Year);
   Calendar_Parent_Fun(Year,Month);
  }

  function Decrement_Function()
  {
   	var decrement_year_as_string = new String(Year);

   	if(decrement_year_as_string.charAt(0) == "0")
   	{
   		if(decrement_year_as_string.charAt(1) == "0")
   		{
   			if(decrement_year_as_string.charAt(2) == "0")
   			{
   				Year = decrement_year_as_string.substring(3);
   			}
   			else
   			{
   				Year = decrement_year_as_string.substring(2);
   			}
   		}
   		else
   		{
   			Year = decrement_year_as_string.substring(1);
   		}
   	}

 if(Year > 1)
 {
   	Year=parseInt(Year)-1;
   	if(Year==1000)Year=1000;

   	var year_as_string = new String(Year);

   	if(year_as_string.length == 1)
   	   Year = "000"+Year;
   	else if(year_as_string.length == 2)
   	   Year = "00"+Year;
   	else if(year_as_string.length == 3)
   	   Year = "0"+Year;

   	document.Calendar_Parent_Form.Year_Field.value=Year;
   	Month=document.Calendar_Parent_Form.D1.options.selectedIndex;
   	TotalDays_Fun(Month,Year);
   	Calendar_Parent_Fun(Year,Month);
   }
  }

  function Key_Function()
  {
    var date_val=document.Calendar_Parent_Form.Year_Field.value;

    if(date_val != "0000" & date_val != "000" & date_val != "00" & date_val != "0")
    {
    	if(date_val.length==4)
    	{
    	  if(!isNaN(date_val))
    	  {
    		Year=document.Calendar_Parent_Form.Year_Field.value;
    		Month=document.Calendar_Parent_Form.D1.options.selectedIndex;
    		TotalDays_Fun(Month,Year);
    		Calendar_Parent_Fun(Year,Month);
    	   }
    	   else
    	   {
    	     alert("Invalid value");
    	   }
    	}
    	else
    	{
    		Year=document.Calendar_Parent_Form.Year_Field.value;


			if(Year.length == 1)
			   Year = "000"+Year;
			else if(Year.length == 2)
			   Year = "00"+Year;
			else if(Year.length == 3)
			   Year = "0"+Year;
    	}
    }
    else
    {
    	alert("Invalid entry");
    	document.Calendar_Parent_Form.Year_Field.value = "";
    	document.Calendar_Parent_Form.Year_Field.focus();
    }
  }

  function Assign_Fun(field,mode)
  {
    d.document.Calendar_Parent_Form.ParentField.value=field;
  }


function getEquivalentMonthNumber(month_name)
{
var s = 0;
    switch(month_name)
    {
    	case "Jan":
    	case "jan":
    	{
    		s= "01";
    		break;
    	}
    	case "Feb":
    	case "feb":
    	{
    	    s= "02";
    	    break;
    	}
    	case "Mar":
    	case "mar":
    	{
    	    s= "03";
    	    break;
    	}
    	case "Apr":
    	case "apr":
    	{
    	    s= "04";
    	    break;
    	}
    	case "May":
    	case "may":
    	{
    	    s= "05";
    	    break;
    	}
    	case "Jun":
    	case "jun":
    	{
    	    s= "06";
    	    break;
    	}
    	case "Jul":
    	case "jul":
    	{
    	    s= "07";
    	    break;
    	}
    	case "Aug":
    	case "aug":
    	{
    	    s= "08";
    	    break;
    	}
    	case "Sep":
    	case "sep":
    	{
    	    s= "09";
    	    break;
    	}
    	case "Oct":
    	case "oct":
    	{
    	    s= "10";
    	    break;
    	}
    	case "Nov":
    	case "nov":
    	{
    	    s= "11";
    	    break;
    	}
    	case "Dec":
    	case "dec":
    	{
    	    s= "12";
    	    break;
    	}
    }
    return s;
}


</script>
</body>

</html>

